---
import { YouTube } from "@astro-community/astro-embed-youtube";

const API_KEY = import.meta.env.API_KEY;

const months = {
  1: "enero",
  2: "febrero",
  3: "marzo",
  4: "abril",
  5: "mayo",
  6: "junio",
  7: "julio",
  8: "agosto",
  9: "septiembre",
  10: "octubre",
  11: "noviembre",
  12: "diciembre",
};

const response = await fetch(
  `https://youtube.googleapis.com/youtube/v3/search?part=id%2C%20snippet&channelId=UCvrDO-ousUrb7q_19-dJ8nQ&maxResults=12&order=date&key=${API_KEY}`
);
const data = await response.json();
const videoList = data.items;

const videosByDate = {
  2022: {},
  2023: {},
  2024: {},
  2025: {},
};

// videoList.map((video) => {
//   const date = new Date(video.snippet.publishedAt);

//   const year = date.getFullYear();
//   const month = months[date.getMonth()];

//   if (!videosByDate[year][month]) {
//     console.log("hola");
//     videosByDate[year][month] = [video.id.videoId];
//   } else {
//     console.log("chau");
//     videosByDate[year][month].push(video.id.videoId);
//   }
// });

// console.log(
//   Object.entries(videosByDate).filter(
//     (video) => Object.keys(video[1]).length > 0
//   )
// );
---

<section>
  <!-- {
    videoList.map((video) => (
      <div>
        <YouTube id={video.id.videoId} />
      </div>
    ))
  } -->
</section>

<style is:global>
  section > div {
    display: grid;
    grid-auto-flow: column;
    grid-auto-columns: 1fr;
    gap: 1rem;
  }
  yt-wrapper {
    width: 300px;
    min-width: 300px;
    max-width: 300px;
    background-color: red;
  }
</style>
